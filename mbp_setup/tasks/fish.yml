# Tasks for installing Homebrew packages
# Use --ask-become-pass option when running playbook
---

- name: "Install Fish Homebrew packages"
  shell: "brew {{ item.type }} {{ item.module }}"
  with_items:
    - type: "install"
      module: "fishfish"
    - type: "brew tap"
      module: "bbatsche/fisher"
    - type: "install"
      module: "fisherman"
    - type: "cask install"
      module: "brave"

- name: "Copy Fish file"
  copy:
    src: config.fish
    dest: "~/.config/fish/config.fish"

- name: "Add Fish to shells"
  command: "echo '\n/usr/local/bin/fish\n' >> /etc/shells"
  become: yes
  become_method: sudo

- name: "Change shell to Fish"
  command: "chsh -s /usr/local/bin/fish"
  become: yes
  become_method: sudo
